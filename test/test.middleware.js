// Generated by CoffeeScript 1.9.1
var page;

page = require('../backend/middleware').page;

describe("middleware", function() {
  var mockRequest, mockResponse;
  mockRequest = function() {
    return {};
  };
  mockResponse = function() {
    var res;
    res = {};
    res.status = sinon.stub().returns(res);
    res.render = sinon.stub().returns(res);
    return res;
  };
  beforeEach(function() {
    this.req = mockRequest();
    return this.res = mockResponse();
  });
  return describe("page()", function() {
    it("renders requested page", function() {
      page('index')(this.req, this.res);
      return this.res.render.calledWith('index').should.be.ok;
    });
    it("sets the http status with page", function() {
      page('404')(this.req, this.res);
      return this.res.status.calledWith(404).should.be.ok;
    });
    return it("sets status to 200 if page can not be parsed as Int", function() {
      page('index')(this.req, this.res);
      return this.res.status.calledWith(200).should.be.ok;
    });
  });
});
